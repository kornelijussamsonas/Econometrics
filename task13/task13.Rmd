---
title: "Task 13"
author: "Kornelijus Samsonas"
output: html_document
---

* **1 Užduotis:** For the following series, find an appropriate Box-Cox transformation and order of differencing in order to obtain stationary data.
(A) usnetelec
(B) usgdp
(C) mcopper
(D) enplanements 
(E) visitors


```{r,message=FALSE}
library(fpp)
```


* **A:**  usnetelec

```{r}
lemda1<-BoxCox.lambda(usnetelec) #transformacijos lambda
n1<-ndiffs(usnetelec) # diferenciavimo eilė
plot(usnetelec) # originalūs duomenys.
plot(diff(BoxCox(usnetelec, lambda=lemda1),differences=n1),col=2)#panaudota boxcox tranformacija ir diferenciavimas
```

* **B:**  usgdp

```{r}
lemda2<-BoxCox.lambda(usgdp) #transformacijos lambda
n2<-ndiffs(usgdp) # diferenciavimo eilė
plot(usgdp) # originalūs duomenys.
plot(diff(BoxCox(usgdp, lambda=lemda2),differences=n2),col=2)#panaudota boxcox tranformacija ir diferenciavimas
```

* **C:**  mcopper

```{r}
lemda3<-BoxCox.lambda(mcopper) #transformacijos lambda
n3<-ndiffs(mcopper) # diferenciavimo eilė
plot(mcopper) # originalūs duomenys.
plot(diff(BoxCox(mcopper, lambda=lemda3),differences=n3),col=2)#panaudota boxcox tranformacija ir diferenciavimas
```

* **D:**  enplanements

```{r}
lemda4<-BoxCox.lambda(enplanements) #transformacijos lambda
n4<-ndiffs(enplanements) # diferenciavimo eilė
plot(enplanements) # originalūs duomenys.
plot(diff(BoxCox(enplanements, lambda=lemda4),differences=n4),col=2)  #panaudota boxcox tranformacija ir diferenciavimas ???KAIP DEL MINUSOO???
```

* **E:** visitors

```{r}
lemda5<-BoxCox.lambda(visitors) #transformacijos lambda
n5<-ndiffs(visitors) # diferenciavimo eilė
plot(visitors) # originalūs duomenys.
plot(diff(BoxCox(visitors, lambda=lemda5),differences=n5),col=2)#panaudota boxcox tranformacija ir diferenciavimas
```

* **Išvados:** Box-cox transformacija ir difernciavimas duomenis padaro stacionarius. Taip pat pritaikius Box-cox transformaciją ir difernciavimą duomenyse stebimas pokytis, o ne bendras duomenų kitimas laike.

_____________
* **2 Užduotis:** Why is a Box-Cox transformation unhelpful for the cangas data?

```{r}
lemda6<-BoxCox.lambda(cangas) #transformacijos lambda
n6<-ndiffs(cangas) # diferenciavimo eilė
plot(cangas) # originalūs duomenys.
plot(BoxCox(cangas,lambda = lemda6),col=2) #panaudota boxcox tranformacija ir diferenciavimas
hist(BoxCox(cangas,lambda = lemda6)) #duomenys po tranformacijos netampa normalūs.
```

Box-Cox transformacija cangas duomenims nenaudingi nes  pradžioje ir pabaigoje svyravimai yra panašūs, o viduryje svyravimai padidėja. Todėl funkcijai nėra prasmės naudoti kokią nors transformaciją nes negali duomenų padaryti reguliaresniais.
_____________

* **3 Užduotis:** Download the data at http://robjhyndman.com/data/retail.xls. Choose one of the series and find an appropriate Box-Cox transformation and order of differencing in order to obtain stationary data.

```{r}
datafull<-read.csv2("retail.csv",header = TRUE)
duom<-datafull[,2]
data<-ts(duom, frequency=12, start=c(1982,4))

lam<-BoxCox.lambda(data) #transformacijos lambda
eil<-ndiffs(data) # diferenciavimo eilė
plot(data) # originalūs duomenys.
plot(BoxCox(data,lambda = lam),col=2) #boxcox transformacija
plot(diff(BoxCox(data, lambda=lam),differences=eil),col=2)#panaudota boxcox tranformacija ir diferenciavimas
```

